<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="styles.css">
  <title> Videos</title>
</head>
<body>
  <h1>YouTube Video</h1>
  <div id="video-grid">
    <!-- The videos will be displayed here -->
  </div>
  <script>
    // Replace this with your own YouTube API key
    const API_KEY = "AIzaSyBJdWbBtJZZ5Y7iLoCEgfFecp2jr-_Rx-c";

    // Replace this with the playlist ID you want to use
    const PLAYLIST_ID = "PL91oEcVvcstCNJDoYm2zWZavhfWX483y-";

    const MAX_RESULTS = "7"

    // The URL to fetch the playlist items from the YouTube API
    const URL = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet%2CcontentDetails%2Cstatus&maxResults=${MAX_RESULTS}&playlistId=${PLAYLIST_ID}&key=${API_KEY}`;

    // The element where the videos will be displayed
    const videoGrid = document.getElementById("video-grid");

    function createLightbox(videoId) {
    // Create a div element for the lightbox
    const lightboxDiv = document.createElement("div");
    lightboxDiv.className = "sby_lightbox";

    // Create a button element for the close button
    const closeBtn = document.createElement("button");
    closeBtn.textContent = "Close";

    // Add an event listener to the close button to close the lightbox when clicked
    closeBtn.addEventListener("click", () => {
      lightboxDiv.style.display = "none";
    });

    // Create an iframe element for the video
    const videoIframe = document.createElement("iframe");
    videoIframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
    videoIframe.allow = "autoplay; encrypted-media";

    // Append the close button and the iframe to the lightbox div
    lightboxDiv.appendChild(closeBtn);
    lightboxDiv.appendChild(videoIframe);

    // Append the lightbox div to the document body
    document.body.appendChild(lightboxDiv);

    // Return the lightbox div
    return lightboxDiv;
  }

// ---------------

    function createContentWrapper() {
      // Create a div element for the content wrapper
      const contentWrapperDiv = document.createElement("div");
      contentWrapperDiv.className = "dih_content_wrapper";

      // Create an h2 element for the title
      const titleH2 = document.createElement("h2");
      titleH2.className = "dih_title";

      // Create span elements for the prefix, infix, and suffix
      const prefixSpan = document.createElement("span");
      prefixSpan.className = "prefix";
      prefixSpan.textContent = "text1";

      const infixSpan = document.createElement("span");
      infixSpan.className = "infix";
      infixSpan.textContent = "text2";

      const suffixSpan = document.createElement("span");
      suffixSpan.className = "suffix";
      suffixSpan.textContent = "text3";

      // Append the prefix, infix, and suffix spans to the title h2
      titleH2.appendChild(prefixSpan);
      titleH2.appendChild(infixSpan);
      titleH2.appendChild(suffixSpan);

      // Create a div element for the text
      const textDiv = document.createElement("div");
      textDiv.className = "dih_text";

      // Create a p element for the description
      const descriptionP = document.createElement("p");
      descriptionP.style.padding = "10px";
      descriptionP.textContent = "subtle hover effects with oval overlay and movement";

      // Append the description p to the text div
      textDiv.appendChild(descriptionP);

      // Create a div element for the button wrapper
      const buttonWrapperDiv = document.createElement("div");
      buttonWrapperDiv.className = "et_pb_button_wrapper";

      // Create an a element for the button
      const buttonA = document.createElement("a");
      buttonA.className = "et_pb_button dih_button";
      buttonA.href = "#";
      buttonA.textContent = "Read more";

      // Append the button a to the button wrapper div
      buttonWrapperDiv.appendChild(buttonA);

      // Append the title h2, text div, and button wrapper div to the content wrapper div
      contentWrapperDiv.appendChild(titleH2);
      contentWrapperDiv.appendChild(textDiv);
      contentWrapperDiv.appendChild(buttonWrapperDiv);

      // Return the content wrapper div
      return contentWrapperDiv;
    }


    


    function createVideoElement(item) {
      // Get the video ID, title, thumbnail URL, view count, like count and comment count from the item object
      const videoId = item.id;
      const title = item.snippet.title;
      const thumbnailUrl = item.snippet.thumbnails.medium.url;
      const viewCount = item.statistics ? item.statistics.viewCount : "N/A";
      const likeCount = item.statistics ? item.statistics.likeCount : "N/A";
      const commentCount = item.statistics ? item.statistics.commentCount : "N/A";

      // Create a div element for the video
      const videoDiv = document.createElement("div");
      videoDiv.className = "video";

      // Create a div element for the thumbnail
      const thumbnailDiv = document.createElement("div");
      thumbnailDiv.className = "sby_video_thumbnail dih_image";
     
      // Create an image element for the thumbnail
      const thumbnailImg = document.createElement("img");
      thumbnailImg.src = thumbnailUrl;
      thumbnailImg.alt = title;

      // Create a div element for the play button
      const playBtnDiv = document.createElement("div");
      playBtnDiv.className = "sby_play_btn";

      // Create a span element for the play button background
      const playBtnBgSpan = document.createElement("span");
      playBtnBgSpan.className = "sby_play_btn_bg";

      // Create an i element for the play button icon
      const playBtnIcon = document.createElement("i");
      playBtnIcon.className = "fab fa-youtube";

      // Append the background span and the icon to the play button div
      playBtnDiv.appendChild(playBtnBgSpan);
      playBtnDiv.appendChild(playBtnIcon);


      // Append the image and the play button div to the thumbnail div
      thumbnailDiv.appendChild(thumbnailImg);
      thumbnailDiv.appendChild(playBtnDiv);

      // Add a click event listener to the thumbnail div that opens the lightbox when clicked
      thumbnailDiv.addEventListener("click", () => {
        const lightbox = createLightbox(videoId);
        lightbox.style.display = "block";
      });

      // Create a div element for the title
      const titleDiv = document.createElement("div");
      titleDiv.className = "title";
      titleDiv.textContent = title;

      // Create a div element for the stats
      const statsDiv = document.createElement("div");
      statsDiv.className = "stats";

      // Create a span element for the view count
      const viewCountSpan = document.createElement("span");
      viewCountSpan.textContent = `${viewCount} views`;

      // Create a span element for the like count
      const likeCountSpan = document.createElement("span");
      likeCountSpan.textContent = `${likeCount} likes`;

      // Create a span element for the comment count
      const commentCountSpan = document.createElement("span");
      commentCountSpan.textContent = `${commentCount} comments`;

      // Append the view count, like count and comment count spans to the stats div
      statsDiv.appendChild(viewCountSpan);
      statsDiv.appendChild(likeCountSpan);
      statsDiv.appendChild(commentCountSpan);

      // Append the thumbnail overlay(contentWrapper) div to the thumbnail div
      const contentWrapper = createContentWrapper();
      thumbnailDiv.appendChild(contentWrapper);

      // Append the thumbnail div, title div and stats div to the video div
      videoDiv.appendChild(thumbnailDiv);
      videoDiv.appendChild(titleDiv);
      videoDiv.appendChild(statsDiv);

      // Return the video div
      return videoDiv;
    }


    // A function that fetches the data from the YouTube API and displays the videos in the grid
    async function displayVideos() {
      try {
        // Fetch the playlist items from the URL
        const response = await fetch(URL);
        const data = await response.json();

        // Get the items array from the data object
        const items = data.items;

        // Loop through each item in the array
        for (let item of items) {
          // Get the video ID from the item object
          const videoId = item.contentDetails.videoId;

          // The URL to fetch the video statistics from the YouTube API
          const videoUrl = `https://www.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails%2Cstatistics&id=${videoId}&key=${API_KEY}`;

          // Fetch the video statistics from the video URL
          const videoResponse = await fetch(videoUrl);
          const videoData = await videoResponse.json();

          // Get the first item from the video data object
          const videoItem = videoData.items[0];

          // Create a video element from the item object
          const videoElement = createVideoElement(videoItem);

          // Append the video element to the grid
          videoGrid.appendChild(videoElement);
        }
      } catch (error) {
        // Handle any errors that may occur
        console.error(error);
      }
    }


    // Call the displayVideos function when the window loads
    window.onload = displayVideos;
  </script>
</body>
</html>
